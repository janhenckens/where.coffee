{"version":3,"sources":["main.js","ajax.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$(document).ready(function() {\n    $('#getlocation').on('click', function(e){\n        e.preventDefault();\n        $('#getlocation').attr(\"disabled\", \"disabled\");\n        navigator.geolocation.getCurrentPosition(success, error);\n    });\n    function success(position) {\n        console.log(\"Location found (2)\");\n        var $lng = position.coords.longitude;\n        var $lat = position.coords.latitude;\n        var $url = '/here';\n        $.ajaxSetup({\n            headers: {\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        });\n\n        $.ajax({\n            type: 'post',\n            url: $url,\n            data: {'lat': $lat, 'lng': $lng, 'request_type' : 'geo'},\n            success: function (data) {\n                console.log(data);\n            }\n        })\n\n    }\n    function error(position) {\n        console.log('location not found');\n    }\n\n});","$(document).ready(function() {\n    $('form#query').on('submit', function (e) {\n        e.preventDefault();\n        var $location =  $('input[name=searchlocation]').val();\n        var $request_type = $('input[name=request_type]').val();\n        var url = '/search';\n        $.ajaxSetup({\n            headers: {\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        });\n        var request = $.ajax({\n            type: 'post',\n            url: url,\n            data: {'searchlocation': $location, 'request_type': $request_type},\n            success:  function(){\n                $('#form').fadeOut('slow').addClass('hidden');\n            }\n        })\n        request.done(function(data) {\n            var locations = jQuery.parseJSON(data);\n            $('#map').fadeIn('slow').show();\n            L.mapbox.accessToken = 'pk.eyJ1IjoiamFuaGVuY2tlbnMiLCJhIjoiMzc2NDI5MDE1ZWI5NzZlOTBmZjNmMWQxMTgxNmQ4ZGMifQ.0MzXVdyyPn7Xt5qnmp2KbQ';\n            var map = L.mapbox.map('map', 'janhenckens.i204n3ak').setView([locations.center.lat, locations.center.lng], 15);\n        });\n    });\n});\n"],"sourceRoot":"/source/"}